(function(){"use strict";var e={5815:function(e,t,r){var n=r(144),i=r(998),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(i.Z,{attrs:{id:"desire"}},[t("router-view")],1)],1)},o=[],a={name:"App",data:()=>({})},u=a,l=r(1001),m=(0,l.Z)(u,s,o,!1,null,null,null),c=m.exports,d=r(8345),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body"},[t("CreditCreator",{on:{get:e.getCredit}}),t("CreditCalculation",{ref:"childRef",attrs:{credit:e.credit}})],1)},p=[],f=r(6570),b=r(2150),y=r(5125),v=r(1713),g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"credit_creator"},[t("div",{staticClass:"info_block"},[t("span",[t("strong",[e._v("Дата: ")]),e._v(" "+e._s(e.credit.date)+" ")]),t("span",[t("strong",[e._v("Сумма: ")]),e._v(" "+e._s(e.credit.sum))]),t("span",[t("strong",[e._v("Срок: ")]),e._v(" "+e._s(e.credit.term)+" ")]),t("span",[t("strong",[e._v("Процент: ")]),e._v(" "+e._s(e.credit.percent)+" ")]),t("span",[t("strong",[e._v("Тип калькулятора: ")]),e._v(" "+e._s(e.credit.type)+" ")])]),t("div",{staticClass:"inputs_block"},[t(y.Z,[t(b.Z,[t(v.Z,[t("DatePicker",{on:{data:e.onDate}}),t("Input",{attrs:{label:"Сумма",field:e.credit.sum},on:{get:e.onSum}}),t("Input",{attrs:{label:"Срок",field:e.credit.term},on:{get:e.onTerm}}),t("Input",{attrs:{label:"Процент",field:e.credit.percent},on:{get:e.onPercent}}),t("Select",{attrs:{label:"Тип калькулятора",color:"#2f4b26",items:e.types},on:{getItem:e.onType}})],1)],1)],1)],1),t(f.Z,{attrs:{depressed:"","x-large":"",text:"",color:"#2f4b26"},on:{click:function(t){return e.$emit("get",e.credit)}}},[e._v(" Посчитать ")])],1)},D=[],N=r(266),x=r(3233),_=r(1831),M=r(7808),O=function(){var e=this,t=e._self._c;return t(N.Z,{attrs:{cols:"12",md:"4"}},[t(_.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:n}){return[t(M.Z,e._g(e._b({attrs:{label:"Дата",readonly:"",color:"#3E885B"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",n,!1),r))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[t(x.Z,{attrs:{color:"#2F4B26"},on:{input:e.selectDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)},C=[],P={data:()=>({date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,modal:!1,menu2:!1}),methods:{selectDate(){this.menu2=!1,this.$emit("data",this.date)}}},S=P,Z=(0,l.Z)(S,O,C,!1,null,"4a5fa442",null),w=Z.exports,I=r(994),F=function(){var e=this,t=e._self._c;return t(N.Z,{staticClass:"d-flex",attrs:{cols:"12",md:"4"}},[t(I.Z,{attrs:{color:e.color,items:e.items,label:e.label},on:{input:function(t){return e.$emit("getItem",e.currentItem)}},model:{value:e.currentItem,callback:function(t){e.currentItem=t},expression:"currentItem"}})],1)},k=[],T={props:{items:{type:Array,required:!0},label:{type:String},color:{type:String}},data:()=>({currentItem:""})},R=T,j=(0,l.Z)(R,F,k,!1,null,"713dc723",null),$=j.exports,A=function(){var e=this,t=e._self._c;return t(N.Z,{attrs:{cols:"12",md:"4"}},[t(M.Z,{attrs:{color:"#3E885B",label:e.label,required:""},model:{value:e.localField,callback:function(t){e.localField=t},expression:"localField"}})],1)},E=[],q={props:{field:{type:String,required:!0},label:{type:String,required:!0}},computed:{localField:{get(){return this.field},set(e){this.$emit("get",e)}}}},B=q,L=(0,l.Z)(B,A,E,!1,null,"6e71377e",null),z=L.exports,V={name:"CreditCreator",components:{DatePicker:w,Select:$,Input:z},data:()=>({credit:{date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),sum:"0",term:"0",percent:"0",type:""},types:["Дифференциальный","Аннуитетный"]}),methods:{onDate(e){this.credit.date=e},onType(e){this.credit.type=e},onSum(e){this.credit.sum=e},onTerm(e){this.credit.term=e},onPercent(e){this.credit.percent=e}}},Y=V,G=(0,l.Z)(Y,g,D,!1,null,"66e97d2d",null),H=G.exports,J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"credit_calculation"},[t("div",{staticClass:"credit_amount"},[e._v(" Сумма кредита: "+e._s(Number(e.credit.sum).toFixed(2))+" ")]),t("div",{staticClass:"repayment"},[t("Select",{attrs:{color:"#375a6b",label:"Тип погашения",items:e.repaymentTypes},on:{getItem:e.getRepaymentType}}),t("Input",{attrs:{label:"Сумма погашения",field:e.repayment.sum.toString()},on:{get:e.onRepayment}}),t(f.Z,{attrs:{depressed:"",large:"",text:"",color:"#2f4b26"},on:{click:e.changeSum}},[e._v(" Погасить ")])],1),t("CreditMonthesList",{attrs:{monthes:e.monthes},on:{delete:e.deleteSumOfMonth}})],1)},K=[],Q=r(2374),U=function(){var e=this,t=e._self._c;return t("div",[t(Q.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.monthes,"item-key":"monthNumber"},scopedSlots:e._u([{key:"item.actions",fn:function({item:r}){return[t(f.Z,{attrs:{depressed:"","x-small":"",text:"",color:"#375a6b"},on:{click:function(t){return e.deleteItem(r)}}},[e._v(" Закрыть ")])]}}])})],1)},W=[],X={name:"CreditMonthesList",props:{monthes:{type:Array,required:!0}},methods:{deleteItem(e){this.editedIndex=this.monthes.indexOf(e),this.$emit("delete",e.MD),this.editedItem=Object.assign({},e),this.monthes.splice(this.editedIndex,1),this.editedIndex=-1}},data:()=>({editedMonth:{monthNumber:"",date:"",DP:"",MD:"",P:"",OD:""},headers:[{text:"№",align:"start",sortable:!1,value:"monthNumber"},{text:"Дата",value:"date"},{text:"Платёж",value:"DP"},{text:"Осн. долг",value:"MD"},{text:"Процент",value:"P"},{text:"Остаток",value:"OD"},{text:"Actions",value:"actions",sortable:!1}]})},ee=X,te=(0,l.Z)(ee,U,W,!1,null,"081979a2",null),re=te.exports,ne={name:"CreditCalcution",props:{credit:{type:Object}},data:()=>({monthes:[],repayment:{type:"",sum:""},repaymentTypes:["Обычное","Досрочное"]}),methods:{onRepayment(e){this.repayment.sum=e},getRepaymentType(e){this.repayment.type=e},changeSum(){Number(this.repayment.sum)>=Number(this.credit.sum)?(this.credit.sum="0",this.monthes=[],this.repayment.sum=""):(this.credit.sum-=Number(this.repayment.sum),"Дифференциальный"===this.credit.type?"Досрочное"===this.repayment.type?this.getDifRepayment():"Обычное"===this.repayment.type&&this.getSimpleRepayment():"Аннуитетный"===this.credit.type&&("Досрочное"===this.repayment.type?this.getAnnCalculation(this.credit):"Обычное"===this.repayment.type&&this.getSimpleRepayment()))},deleteSumOfMonth(e){this.credit.sum-=Number(e)},daysInMonth(e,t){return new Date(t,month,0).getDate()},getAnnCalculation(e){this.monthes=[];let t=Number(e.sum),r=Number(e.percent)/100/12,n=r*Math.pow(1+r,Number(e.term))/(Math.pow(1+r,Number(e.term))-1),i=Number(e.sum)*Number(n);for(let s=0;s<e.term;s++){let r;s>=1?(r=new Date(this.monthes[s-1].date),r.setMonth(r.getMonth()+1)):(r=new Date(e.date),r.setMonth(r.getMonth()+1));let n=(Math.pow(1.1,this.daysInMonth(r.getMonth(),r.getFullYear())/365)-1)*Number(t),o=Number(i)-Number(n);t=Number(t)-Number(o);let a={monthNumber:s+1,date:r.toISOString().substr(0,10),DP:i.toFixed(2),MD:o.toFixed(2),P:n.toFixed(2),OD:t.toFixed(2)};this.monthes.push(a)}},getDifCalculation(e){let t;this.monthes=[];let r=Number(e.sum);for(let n=0;n<e.term;n++){let i,s=Number(e.sum)/Number(e.term),o=Number(r)*Number(e.percent)/100/Number(e.term);t=Number(s)+Number(o),r=Number(r)-Number(s),n>=1?(i=new Date(this.monthes[n-1].date),i.setMonth(i.getMonth()+1)):(i=new Date(e.date),i.setMonth(i.getMonth()+1));let a={monthNumber:n+1,date:i.toISOString().substr(0,10),MD:s.toFixed(2),P:o.toFixed(2),DP:t.toFixed(2),OD:r.toFixed(2)};this.monthes.push(a)}},getDifRepayment(){this.monthes.forEach(((e,t)=>{Number(this.repayment.sum)>=Number(e.MD)?(this.repayment.sum-=Number(e.MD),e.OD=Number(this.credit.sum),this.monthes.forEach(((e,t)=>{e.P=(Number(e.OD)*Number(this.credit.percent)/100/12).toFixed(2),t>0&&0!=Number(e.MD)&&(e.OD=(Number(this.monthes[t-1].OD)-Number(e.MD)).toFixed(2))})),e.OD=Number(this.credit.sum),e.DP=Number(e.P).toFixed(2),e.MD=0):(e.MD=(Number(e.MD)-Number(this.repayment.sum)).toFixed(2),e.DP=(Number(e.DP)-Number(this.repayment.sum)).toFixed(2),e.OD=(Number(this.monthes[t-1].OD)-Number(e.MD)).toFixed(2),this.repayment.sum="")}))},getSimpleRepayment(){const e=[];[...this.monthes].forEach(((t,r)=>{this.repayment.sum>=Number(t.DP)?this.repayment.sum-=Number(t.DP):(t.DP-=this.repayment.sum,this.repayment.sum>=Number(t.P)?(this.repayment.sum-=Number(t.P),t.P="0",t.MD-=this.repayment.sum.toString(),t.MD=Number(t.MD).toFixed(2)):(t.P-=Number(this.repayment.sum),t.P=Number(t.P).toFixed(2)),this.repayment.sum=0,e.push(t))}),this.monthes=e)}},components:{CreditMonthesList:re,Input:z,Select:$}},ie=ne,se=(0,l.Z)(ie,J,K,!1,null,"55c3400c",null),oe=se.exports,ae={name:"CalculatorView",components:{CreditCreator:H,CreditCalculation:oe},data:()=>({credit:{date:null,sum:"0",term:"0",percent:"0",type:""}}),methods:{getCredit(e){this.credit={...e},"Дифференциальный"===this.credit.type?this.$refs.childRef.getDifCalculation(this.credit):"Аннуитетный"===this.credit.type&&this.$refs.childRef.getAnnCalculation(this.credit)}}},ue=ae,le=(0,l.Z)(ue,h,p,!1,null,null,null),me=le.exports;n.ZP.use(d.Z);const ce=[{path:"/calculator",name:"calculator",component:me}],de=new d.Z({mode:"history",base:"credit-calculator/",routes:ce});var he=de,pe=r(1705);n.ZP.use(pe.Z);var fe=new pe.Z({});n.ZP.config.productionTip=!1,new n.ZP({router:he,vuetify:fe,render:e=>e(c)}).$mount("#app")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,n,i,s){if(!n){var o=1/0;for(m=0;m<e.length;m++){n=e[m][0],i=e[m][1],s=e[m][2];for(var a=!0,u=0;u<n.length;u++)(!1&s||o>=s)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(a=!1,s<o&&(o=s));if(a){e.splice(m--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[n,i,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,o=n[0],a=n[1],u=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(u)var m=u(r)}for(t&&t(n);l<o.length;l++)s=o[l],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(m)},n=self["webpackChunkcredit_calculator"]=self["webpackChunkcredit_calculator"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(5815)}));n=r.O(n)})();
//# sourceMappingURL=app.701a9c15.js.map